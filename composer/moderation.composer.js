const { Composer } = require ('telegraf')
const moderation = new Composer()

//–ú–∞—Å—Å–∏–≤ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ
const words = [
        "–ø—É—Ç–∏–Ω",
        "–ø—à–µ–∫–∏",
        "–≤–æ–ª—ã–Ω—å",
        "—Ö–æ—Ö–æ–ª",
        "invest",
        "–∑–µ–ª–µ–Ω—Å–∫–∏–π",
        "binary",
        "trader",
        "forex",
        "trading",
        "—Å–ø–µ—Ü–æ–ø–µ—Ä–∞—Ü–∏—è",
        "–Ω–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç",
        "–º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–∞–º",
        "–ø—Ä–µ–¥–ª–∞–≥–∞—é —É—Å–ª—É–≥–∏",
        "–º—ã –ø—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –∫ –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É",
        "—É—Å–ª–æ–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞",
        "—Ç—Ä–µ–±—É–µ–º—ã–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã",
        "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤ –∫–∞–Ω–¥–∏–¥–∞—Ç—É",
        "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º",
        "c–∫–∞–º –ø—Ä–æ–µ–∫—Ç",
        "scam –ø—Ä–æ–µ–∫—Ç",
        "scam project",
        "join this channel",
        "ùêà ùê¨ùê≠ùêöùê´ùê≠ùêûùêù ùê∞ùê¢ùê≠ùê°",
        "with link",
        "invest with this company",
        "—Ö–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å–æ–º",
        "–≤ –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ",
        "—Ö–æ—á–µ—à—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å?", 
        "–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º –ø–∏—Å–∞—Ç—å –≤ –ª—Å",
        "–Ω–∞—à–∞ —Ñ–∏—Ä–º–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å",
        "contact him this",
        "–º–æ–∂–µ–º –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ",
        "–º—ã —è–≤–ª—è–µ–º—Å—è —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏",
        "–ø–æ–º–æ–∂–µ–º –≤–∞–º —Å–¥–µ–ª–∞—Ç—å",
        "ùê£ùê®ùê¢ùêß ùê≠ùê°ùê¢ùê¨ ùêúùê°ùêöùêßùêßùêûùê•",
        "ùêà‚Äôùê¶ ùê¨ùê® ùê¶ùêÆùêúùê° ùê°ùêöùê©ùê©ùê≤",
        "ùêúùê®ùêßùê≠ùêöùêúùê≠ ùê°ùê¢ùê¶",
        "–æ—Ç –≤–∞—Å –ø–∞—Å–ø–æ—Ä—Ç —Å—Ç—Ä–∞–Ω—ã –ï–°",
        "–ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–æ–∂—É",
        "–ø–æ–º–æ–∂–µ–º –≤–∞–º –æ—Ñ–æ—Ä–º–∏—Ç—å",
        "–≤–æ–ª—ã–Ω—Å–∫–∞—è —Ä–µ–∑—å–Ω—è",
        "–ù—É–∂–Ω—ã –ª—é–¥–∏ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∞–∫–∫–∞—É–Ω—Ç–æ–≤",
        "üëá"
]

//–§—É–Ω–∫—Ü–∏—è "–æ—Ç–ª–æ–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"
moderation.on('message', async (ctx) => {
        const wordList = words
        if(ctx.message.text) {
            const word = ctx.message.text.toLowerCase()
            try {
                //–¶–∏–∫–ª –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ—Ç –¥–ª–∏–Ω–Ω—É –º–∞—Å—Å–∏–≤–∞ –∏ –ø—Ä–æ–±–µ–≥–∞–µ—Ç—Å—è –ø–æ –Ω–µ–º—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
                for (let i = 0; i < wordList.length; i++) {
                    if(word.includes(words[i])) {
                        await ctx.deleteMessage()
                    }
                }
                } catch (e) {
                    //–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω—è, —á—Ç–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –±—ã–ª–æ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
                    if(e.response.description.includes('Bad Request: message to delete not found') === true) {
                        return console.log('–æ–∫–µ–π, —Ç–∞–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, —è –Ω–µ —É–ø–∞–ª')
                    }
                    console.log(e)        
                }
            }
        })

module.exports = moderation