const { Composer } = require ('telegraf')
const moderation = new Composer()

//–ú–∞—Å—Å–∏–≤ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ
const words = [
        "–ø—É—Ç–∏–Ω",
        "–º—ã –ø—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –∫ –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É",
        "–Ω–∞—à–∞ —Ñ–∏—Ä–º–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å",
        "–ø—à–µ–∫–∏",
        "–≤–æ–ª—ã–Ω—å",
        "—Ö–æ—Ö–æ–ª",
        "–Ω–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç",
        "–º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–∞–º",
        "–ø—Ä–µ–¥–ª–∞–≥–∞—é —É—Å–ª—É–≥–∏",
        "–∑–µ–ª–µ–Ω—Å–∫–∏–π",
        "—Å–ø–µ—Ü–æ–ø–µ—Ä–∞—Ü–∏—è",
        "—É—Å–ª–æ–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞",
        "—Ç—Ä–µ–±—É–µ–º—ã–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã",
        "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤ –∫–∞–Ω–¥–∏–¥–∞—Ç—É",
        "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º",
        "c–∫–∞–º –ø—Ä–æ–µ–∫—Ç",
        "join this channel",
        "scam –ø—Ä–æ–µ–∫—Ç",
        "scam project",
        "ùê£ùê®ùê¢ùêß ùê≠ùê°ùê¢ùê¨ ùêúùê°ùêöùêßùêßùêûùê•",
        "–≤–æ–ª—ã–Ω—Å–∫–∞—è —Ä–µ–∑—å–Ω—è",
        "trader"
]

//–§—É–Ω–∫—Ü–∏—è "–æ—Ç–ª–æ–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"
moderation.on('message', async (ctx) => {
        console.log(ctx.message)
        const wordList = words
        if(ctx.message.text) {
            const word = ctx.message.text.toLowerCase()
            try {
                //–¶–∏–∫–ª –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ—Ç –¥–ª–∏–Ω–Ω—É –º–∞—Å—Å–∏–≤–∞ –∏ –ø—Ä–æ–±–µ–≥–∞–µ—Ç—Å—è –ø–æ –Ω–µ–º—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
                for (let i = 0; i < wordList.length; i++) {
                    if(word.includes(words[i])) {
                        await ctx.deleteMessage()
                    }
                }
                } catch (e) {
                    //–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω—è, —á—Ç–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –±—ã–ª–æ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
                    if(e.response.description.includes('Bad Request: message to delete not found') === true) {
                        return console.log('–æ–∫–µ–π, —Ç–∞–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, —è –Ω–µ —É–ø–∞–ª')
                    }
                    console.log(e)
                }
            }
        })

module.exports = moderation